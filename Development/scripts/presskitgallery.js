var bind=function(t,i){return function(){return t.apply(i,arguments)}};!function(t,i,n){var e;return e=function(){function i(i,n){this.findandreplace=bind(this.findandreplace,this),this.showViewer=bind(this.showViewer,this),this.changeTo=bind(this.changeTo,this),this.addClickEvents=bind(this.addClickEvents,this),this.options=t.extend({},this.defaults,n),this.$el=t(i),this.thumbs=this.$el.find(this.options.thumbs),this.list=this.$el.find(this.options.list),this.viewcontainer=this.$el.find(this.options.viewcontainer),this.viewer=this.$el.find(this.options.viewer),this.caption=this.$el.find(this.options.caption),this.close=this.$el.find(this.options.close),this.current=0,this.addClickEvents()}return i.prototype.defaults={thumbs:".thumbs",list:".list",attr:"n",current:0,viewcontainer:".container",viewer:".view",next:".next",prev:".prev",close:".close",speed:1,selected:"selected",source:"<img src={{path}} />",caption:".image-desc",captionsource:"{{caption}}",onStart:function(){},onSwitch:function(){},onEnd:function(){}},i.prototype.addClickEvents=function(){return this.thumbs.click(function(i){return function(n){var e;return e=Number(t(n.target).attr(i.options.attr)),i.showViewer(e)}}(this)),this.thumbs.children().click(function(i){return function(n){var e;return n.stopPropagation(),e=Number(t(n.target).closest(i.options.thumbs).attr(i.options.attr)),i.showViewer(e)}}(this)),this.$el.find(this.options.next).click(function(t){return function(){var i;return i=t.current,i++,i===t.thumbs.length&&(i=0),t.changeTo(i)}}(this)),this.$el.find(this.options.prev).click(function(t){return function(){var i;return i=t.current,i--,0>i&&(i=t.thumbs.length-1),t.changeTo(i)}}(this)),this.close.click(function(t){return function(){return t.viewcontainer.hide(),t.list.show()}}(this)),this.viewcontainer.swipe({swipeLeft:function(t){return function(){return t.$el.find(t.options.next).trigger("click")}}(this),swipeRight:function(t){return function(){return t.$el.find(t.options.prev).trigger("click")}}(this)})},i.prototype.changeTo=function(i){return this.options.onStart.call(void 0,this.thumbs.eq(this.current)),this.viewer.children().fadeOut(1e3*this.options.speed,function(n){return function(){var e,s;return t(n).remove(),n.current=i,n.options.onSwitch.call(void 0,n.thumbs.eq(n.current)),s=n.options.source,s=n.findandreplace(s,n.thumbs.eq(n.current)),n.viewer.html(s),e=n.findandreplace(n.options.captionsource,n.thumbs.eq(n.current)),n.caption.html(e),n.viewer.children().hide().fadeIn(1e3*n.options.speed,function(){return n.options.onEnd.call(void 0,n.thumbs.eq(n.current))})}}(this))},i.prototype.showViewer=function(t){var i,n;return this.current=t,this.options.onStart.call(void 0,this.thumbs.eq(this.current)),this.list.hide(),this.viewer.html(""),this.viewcontainer.show(),n=this.options.source,n=this.findandreplace(n,this.thumbs.eq(this.current)),this.viewer.html(n),i=this.findandreplace(this.options.captionsource,this.thumbs.eq(this.current)),this.caption.html(i),this.viewer.children().hide().fadeIn(1e3*this.options.speed,function(t){return function(){return t.options.onEnd.call(void 0,t.thumbs.eq(t.current))}}(this))},i.prototype.findandreplace=function(t,i){var n,e,s;for(n=t.split("{{"),e=0;e<n.length;)s=n[e].split("}}"),s.length>1&&(s[0]=i.attr(s[0])),n[e]=s.join(""),e++;return t=n.join("")},i}(),t.fn.extend({PressKitGallery:function(i){return this.each(function(){return t(this).data("PressKitGallery",new e(this,i))})}})}(jQuery,window,document);